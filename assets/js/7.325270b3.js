(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{403:function(t,a,s){t.exports=s.p+"assets/img/vs-solidity.8c6e3b57.png"},404:function(t,a,s){t.exports=s.p+"assets/img/metamask.e6fd2e63.png"},405:function(t,a,s){t.exports=s.p+"assets/img/ethscan.750601e9.png"},406:function(t,a,s){t.exports=s.p+"assets/img/AlchemySepoliaFaucet.6edcf0d9.png"},407:function(t,a,s){t.exports=s.p+"assets/img/ether_thx_result.5c947eaa.png"},484:function(t,a,s){"use strict";s.r(a);var e=s(14),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一-概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-概述"}},[t._v("#")]),t._v(" 一. 概述")]),t._v(" "),a("p",[t._v("Hardhat是一个用于Ethereum软件的开发环境。它由不同的组件组成，用于编辑、编译、调试和部署你的智能合约和DApps，所有这些组件一起工作以创建一个完整的开发环境。")]),t._v(" "),a("p",[t._v("Hardhat Runner是你在使用Hardhat时交互的主要组件。它是一个灵活和可扩展的任务运行器，可以帮助你管理和自动化开发智能合约和dApps所固有的经常性任务。")]),t._v(" "),a("p",[t._v("Hardhat Runner是围绕任务和插件的概念设计的。每次你从命令行运行Hardhat时，你都在运行一个任务。例如，npx hardhat compile 运行内置的编译任务。任务可以调用其他任务，允许定义复杂的工作流程。用户和插件可以覆盖现有的任务，使这些工作流程可定制和可扩展。")]),t._v(" "),a("h2",{attrs:{id:"二-安装及示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-安装及示例"}},[t._v("#")]),t._v(" 二. 安装及示例")]),t._v(" "),a("p",[t._v("开发工具可以选择"),a("code",[t._v("Visual Studio Code")]),t._v("，安装"),a("code",[t._v("Solidity")]),t._v("扩展，Windows 系统推荐使用 "),a("a",{attrs:{href:"https://learn.microsoft.com/en-us/windows/wsl/install",target:"_blank",rel:"noopener noreferrer"}},[t._v("WSL 2"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[a("img",{attrs:{src:s(403),alt:"vs-solidity"}})]),t._v(" "),a("p",[t._v("本例使用"),a("code",[t._v("npm")]),t._v("，版本 >= 7")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 创建一个空目录，并初始化")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" hello "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" hello\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 添加 hardhat 依赖包")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev hardhat\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 创建 hardhat 项目（包含：智能合约示例、示例合约的单元测试、示例合约部署脚本）。选择 Create a JavaScript project")]),t._v("\nnpx hardhat\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可选操作")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 简写工具，命令行 hh = npx hardhat ，执行 npm install --global hardhat-shorthand 安装")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 命令自动完成，执行 hardhat-completion install 安装")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 验证安装，运行如下命令，查看 hardhat 的版本")]),t._v("\nnpx hardhat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 编译智能合约，示例智能合约 contracts/Lock.sol")]),t._v("\nnpx hardhat compile\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试智能合约，测试文件位于 test/ 目录下")]),t._v("\nnpx hardhat "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 部署智能合约（本地）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 开启一个本地 hardhat 网络节点")]),t._v("\nnpx hardhat "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("node")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 将智能合约部署到本地 hardhat 网络节点")]),t._v("\nnpx hardhat run scripts/deploy.js "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--network")]),t._v(" localhost\n\n")])])]),a("h2",{attrs:{id:"二-部署到以太坊测试网"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-部署到以太坊测试网"}},[t._v("#")]),t._v(" 二. 部署到以太坊测试网")]),t._v(" "),a("p",[t._v("智能合约在本地验证通过后，需要将智能合约部署到"),a("a",{attrs:{href:"https://etherscan.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("以太坊（主网）"),a("OutboundLink")],1),t._v("中，而在这之前，应该将智能合约先部署到测试网中，进行充分的测试后，再部署到主网中。")]),t._v(" "),a("p",[t._v("测试网选择 "),a("code",[t._v("Sepolia")]),t._v("，"),a("a",{attrs:{href:"https://sepolia.etherscan.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sepolia 测试网络"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[a("font",{attrs:{color:"red"}},[t._v("注意：要完成操作，需要科学上网（浏览器和命令行）。")])],1),t._v(" "),a("p",[t._v("要部署到"),a("a",{attrs:{href:"https://sepolia.etherscan.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sepolia 测试网络"),a("OutboundLink")],1),t._v("，需要进行如下操作：")]),t._v(" "),a("h3",{attrs:{id:"_1-创建一个电子钱包帐户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建一个电子钱包帐户"}},[t._v("#")]),t._v(" 1. 创建一个电子钱包帐户")]),t._v(" "),a("p",[t._v("安装"),a("a",{attrs:{href:"https://metamask.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("MetaMask"),a("OutboundLink")],1),t._v("，注册并创建一个帐号。主要信息：地址、私钥。")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(404),alt:"metamask"}}),t._v(" "),a("h3",{attrs:{id:"_2-创建一个-etherscan-帐户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建一个-etherscan-帐户"}},[t._v("#")]),t._v(" 2. 创建一个 Etherscan 帐户")]),t._v(" "),a("p",[t._v("打开"),a("a",{attrs:{href:"https://etherscan.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Etherscan explorer"),a("OutboundLink")],1),t._v("，注册并创建一个帐号。主要信息：API Keys。")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(405),alt:"ethscan"}}),t._v(" "),a("h3",{attrs:{id:"_3-创建一个-alchemy-账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建一个-alchemy-账户"}},[t._v("#")]),t._v(" 3. 创建一个 Alchemy 账户")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.alchemy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alchemy"),a("OutboundLink")],1),t._v("是一个以太坊开发者平台，提供了一系列工具和服务，帮助开发者构建和扩展基于以太坊的应用程序。它旨在简化以太坊开发过程，提供更好的开发体验和性能优化。")]),t._v(" "),a("p",[t._v("与以太坊通信，需要注册并创建一个帐号。主要信息：API Keys。")]),t._v(" "),a("h3",{attrs:{id:"_4-获取测试以太币"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-获取测试以太币"}},[t._v("#")]),t._v(" 4. 获取测试以太币")]),t._v(" "),a("p",[t._v("将智能合约部署到Sepolia测试网中，需要消耗测试以太币。可以在"),a("a",{attrs:{href:"https://sepoliafaucet.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alchemy Sepolia Faucet"),a("OutboundLink")],1),t._v("中免费获取。")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:s(406),alt:"AlchemySepoliaFaucet"}}),t._v(" "),a("ul",[a("li",[t._v("修改配置"),a("code",[t._v("hardhat.config.js")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ALCHEMY_API_KEY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alchemy API Key"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METAMASK_PRIVATE_KEY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MetaMask钱包中的账户私钥"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("solidity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.8.18"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("etherscan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("apiKey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<ETHER_SCAN_API_KEY>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("networks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sepolia")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("https://eth-sepolia.g.alchemy.com/v2/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ALCHEMY_API_KEY")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("accounts")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METAMASK_PRIVATE_KEY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_5-部署智能合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-部署智能合约"}},[t._v("#")]),t._v(" 5. 部署智能合约")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 部署到Sepolia 测试网络")]),t._v("\nnpx hardhat run scripts/deploy.js "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--network")]),t._v(" sepolia\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 验证智能合约Lock.sol, <address> 是智能合约地址, <unlock time> 是时间（毫秒）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 注意：验证前，先在 Etherscan 中手工发布智能合约源码并验证")]),t._v("\nnpx hardhat verify "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--network")]),t._v(" sepolia "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("unlock time"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 跟多详情，请查看 https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-verify")]),t._v("\n")])])]),a("h3",{attrs:{id:"_6-查看结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-查看结果"}},[t._v("#")]),t._v(" 6. 查看结果")]),t._v(" "),a("p",[t._v("执行成功后，结果可以在 Etherscan 中进行查看")]),t._v(" "),a("p",[a("img",{attrs:{src:s(407),alt:"ether_thx_result"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);